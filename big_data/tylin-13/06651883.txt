 Abstract Mixed signal ATE \(Automated Test Equipment\ often integrates a waveform sampler for testing UHF signals While performing under-sampling, slow jitter greatly influences the captured signal which is reconstructed into 
 Hideo Okawara ADVANTEST Corporation   Tokyo, Japan 
Lecture 4.3                                   INTERNATIONAL TEST CONFERENCE                                        1 978-1-4799-0859-2/13/$31.00 \2512013 IEEE 
  Advanced Method to Refine Waveform Smeared by Jitter in Waveform Sampler Measurement   
a m e ani ngf ul w a vef or m by m anner of co her e nt w a vef or m  reconstruction. The purpose of this work is to remove slow jitter effects from a high-speed digital signal measured by a waveform sampler and to reconstruct a clear waveform and eye pattern. The test signal is a PRBS \(Pseudo Random Binary Sequence\ bit stream with slow jitter. The PRBS signal becomes an extreme wideband multi-tone from a spectrum point of view, so capturing such a signal with a waveform sampler needs a carefully organized test plan based on the coherent condition. Measured data is reconstructed into a meaningful waveform by reshuffling the sequence of the sampled poin ts. Jitter in the signal is a 
kind of PM \(Phase Modulation\ which smears the spectrum. So the point of processing is to demodulate the PM signal and then restore the original multi-tone components. An elegant mathematical equation is introduced to perform the carrier tone recovery. Because of the multi-tone structure processing needs to be applied to each one of the tone components. First, the PM effect is removed from each tone, and then each tone needs to be compensated amplitude loss by referencing the original tone power. Finally processing successfully reconstructs a clear PRBS waveform and a big eye opening. This paper reports the signal processing in detail with showing 7 
Gbps 127-bit PRBS waveform 
 1  Introduction 1.1 Background High-speed digital interface devices are evaluated for their transmitted waveform integrity using PRBS or device specific test patterns. The frequency spectrum of those signals is dispersed to more than 10 GHz. Such a high frequency signal is attenuated by the frequency characteristics of the signal path, so the measured waveform is often compensated by de-embedding the sparameters of signal transmission lines. Since those 
interfaces are usually exposed to a harsh noisy environment, the transmission signal is contaminated by jitter. Moreover such devices may employ SSC \(Spread Spectrum Clocking\ for reducing EMI \(Electro-Magnetic Interference\tside the device. So, the signal speed looks stable in a short period of time; however, the UI \(Unit Interval\s continuously and subtly changing around the nominal period. In this situation, capturing a whole waveform set is not an easy task for digital ATE which is designed to capture signals with as stable a frequency as 
possible. My colleagues and I reported a method to reconstruct a clear waveform and an eye pattern \(or diagram\ ITC 2012. It is named DNA \(Data aNAlysis and RNA \(Recovering aNAlysis\his method can dramatically recover a clear waveform; however it requires a reference signal in addition to the target signal and the test conditions are not clearly organized ye  Mixed signal ATE such as the Advantest V93000 can be equipped with a waveform sampler [2 test UHF sig n a l s   which has a very wide band sample-and-hold circuit and a high-speed A/D converter in the analog front-end. This 
resource can capture high-speed digital waveforms as well as UHF analog signals. There is an issue for the sampler to capture high-speed digital signals containing slow jitter This paper specifically reports how it removes slow jitter from the measured signal and reconstructs a clear waveform and a big eye opening  Figure 1 Coherent Wavef orm Reconstruction  1.2 Coherent Waveform Reconstruction When denoting the test signal and the sampling frequencies as 
Ft and Fs respectively, and the number of signal cycles and the number of sampling points M and N  respectively, there is a coherent equation defined as follows N M F s Ft 
  1 


Figure 2 Page Concept of Under-sampling  For instance, if you have test signal spectra at extended bin numbers of 35, 70 and 105 as \(a\strates, when performing under-sampling, they are aliased and found at the bins 3, 6 and 9 in the baseband as \(d\strates. This is the methodology the waveform sampler uses to capture and analyze very high frequency signals regardless of violating the Nyquist theorem. Under-sampling loses the frequency information of test signal. However, in device testing situation the test signal is well known in advance so this does not become an issue The Nyquist theorem prescribes Ft  Fs 2\ that M  N 2 In under-sampling situation Equation \(1\ can be extended as follows N Mx K N M F s Ft  Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        2    Where M and N should be integers and relatively prime This is the coherent condition which is important to comply with in mixed signal tests. [3 Figur e 1  a  illustrates a 3-cycle M sinusoidal waveform which is sampled with 10 N sampling strobes. The sampled points are marked with numbered dots. Since three and ten are relatively prime  each sampled point resides at a different primary phase of the sinusoid.  The M cycle sinusoid can be reshuffled based on the primary phase sequence to make up a single-cycle sinusoid. Figure 1 \(b illustrates how it is reshuffled. This reshuffling processing is called coherent waveform reconstruction \(CWR\his is very useful in mixed signal tests; for example, it is effective as a quick signal integrity check in online debug Moreover, CWR is a very important method for reconstructing a waveform which has been under-sampled by  a waveform sampler. Mixed signal ATE provides an application specific processing instruction to perform the CWR. [4  1.3 Under-sampling by Waveform Sampler Figure 2 illustrates a ribbon of the panoramic frequency domain. The red line marked Fs indicates the location of the actual sampling rate N 32 in the figure\enotes the number of sampling points. Then, a FFT \(Fast Fourier Transform\ generates N 2 bins of spectrum. The baseband bin numbers are 0, 1, 2, \205, 15, and higher frequency components  are extended in bin numbers as 16, 17, 18, \205 The broad range of the frequency domain can be considered as a series of N 2-size pages concatenated together. When performing under-sampling, you should consider the concatenated pages are folded page-wise as b\d degenerated into a single baseband page as \(c Consequently the FFT provides the baseband spectrum illustrated as \(d\e end   Where K and Mx are integers Mx should be selected as \(N 2 Mx  N 2\hen |Mx| becomes the aliased bin number in the baseband in Figure 2 \(d  1.4 Under-sampling of Wideband Signal The target signal is a PRBS bit stream which actually becomes a wideband multi-tone signal. Figure 3 illustrates the frequency domain of a multi-tone test signal as well as the sampler extended frequency domain  Figure 3 Under-sampling of Wideband Signal  Let\222s suppose that the test signal multi-tone consists of total L lines of spectra, whose frequency spacing is F If you capture this wideband signal with N sampling points by under-sampling, all spectral lines must be accommodated in the baseband which consists of N 2 bins So N 2 L The original signal spectra must fall exactly in the sampler\222s extended bin locations one by one, so F=Nx\225Fres where Nx is an integer and Fres=Fs  N which is the sampler\222s frequency resolution N should be selected as 2 n for the FFT. When folding the pages by undersampling, each one of the aliased bins must not duplicate each other in the baseband. So Nx must be selected as an odd integer. Consequently the waveform sampler should be programmed based on the following guidelines  N 2 L   N 2 n for FFT  3  Fs  N\225 F/Nx   Nx Odd Integer 4 1.5 Test Condition A digital pin driver of the V93000 generates a 127-bit PRBS bit stream running at the speed of 7 Gbps. The resource to capture this signal is the waveform sampler 223MCC\224 \(Multi-Channel analog resource C\, which is capable of capturing analog signals up to approximately 10 GHz. Its actual sampling rate is a maximum of 110 Msps   2 


 Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        3    Therefore, even an extremely wideband signal must be captured within the baseband maximum of 55 MHz In order to generate a 2-UI eye pattern \(that is convenient to see\s program the waveform sampler to observe two loops of the 127-bit PRBS, so a total 254 UIs of PRBS data is actually captured as illustrated in Figure 4. When you reshuffle the captured waveform by the factor of 127 a 2-UI window eye is efficiently reconstructed  Figure 4 Target Signal Structure \(2 Loops of 127-bit PRBS  The frequency of slow jitter or SSC here is assumed to be around several kHz to several 10\222s of kHz so that the sampler\222s frequency resolution should be on the order of kHz. Then the sampling condition based on guidelines \(3 4\etermined as follows  Number of Sampling Points  N 65536 Points  Resolution Ratio F  Fres    Nx 16425  Sampling Rate Fs 109.961049389374 Msps When using this condition, the target signal would be under-sampled in the way Figure 5 illustrates. The main lobe of the 7 Gbps 127-bit PRBS signal consists of 127 tones below 7 GHz at regular intervals as \(a\strates  Figure 5  Frequency Structure of Under-sampled Target Signal  Table 1 shows some of the tone frequencies and aliased bin locations calculated by the extended coherent Equation 2\ The first tone is located at approximately 55.12 MHz the second tone is located at approximately at 110.24 MHz and so on. The sampling rate of the waveform sampler is approximately 110 Msps, so the baseband is approximately 55 MHz wide and the extended pages appear as Figure 5 b\strates. Therefore, when all spectral tones are aliased in the baseband, the even numbered tones which have positive Mx in Table 1 would fall on the left-hand side and the odd numbered tones which have negative Mx  would be aliased on the right-hand side of the baseband as Figure 5 \(c\strates  Table 1 Aliased Bin Locations of 7 Gbps 127-bit PRBS  2  Signal Processing Strategy 2.1 Reality of Jitter Influenced Signal The first experiment tested the 7 Gbps 127-bit PRBS signal containing a sinusoidal jitter of 5 kHz 200ps-pp  Figure 6 Reconstructed Waveform and Eye \(7 Gbps PRBS  Figure 6 \(a\hows the raw waveform measured by the waveform sampler with the condition described in the previous section. Then the waveform is reshuffled by the factor of Nx 16425\, reconstructing the PRBS waveform shown in \(b\There are 254 UIs captured, so it displays approximately 36.3 ns \(=254/7GHz\of the period Actually, it takes approximately 596 us \(=65536/110MHz for the waveform sampler to complete the capture. So the 


005\005\005 005 002++\002=\002 10 Finally the carrier cos cos t lved as follows 2 1  sin cos cos t ttttt t 005\005\005\005 005\005\005\005 005 005 9 sin\(\cos cos\1 2  Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        4    actual measured period contains approximately three cycles of the 5 kHz jitter waveform. Consequently the reconstructed trace is greatly blurred and collapsed by the jitter as \(c\ows. Finally, the waveform \(b\huffled by the factor of 127, generating an eye pattern as shown in d\owever no eye opening can be found at all because the trace is extremely blurred. This is the influence of the slow jitter on the measurement made by a waveform sampler A sampling oscilloscope usually integrates a CDR \(Clock Data Recovery\ability to follow slow data clock fluctuations so that it can display clear signal traces However, waveform samplers in ATE usually do not integrate such functionality, so this problem cannot be resolved without a special post processing   Figure 7   Spectrum of Jitter Influenced Signal \(7 Gbps PRBS  2.2 Spectrum of Jitter Influenced Signal Applying the FFT directly to the measured waveform Figure 7 discloses the frequency spectrum of the jitter influenced signal as estimated in Figure 5 \(c\The odd numbered tones are located on the right-hand side and the even numbered tones are located on the left-hand side in d\ and \(e\ are close up R\d \(S\n \(a Mx  numbers are printed besides each tone. The tone spacing is 164 units of sampler resolution so the distance corresponds to approximately 275 kHz. Each tone actually looks modulated by the jitter. As \(c\d \(d\ indicates, it looks like a typical PM spectrum. Therefore, in order to recover a clear waveform trace, you need to remove the modulation effect of the jitter 2.3 Equation of Carrier Tone Recovery Jitter is a kind of phase modulation \(PM\ each tone of the multi-tone. Let\222s denote a tone as cos t here  and are the angular frequency and the phase of the carrier tone. The jitter influenced signal, that is the PM modulated tone, can be described as cos t   t  where  t   0\ is the PM component. It is required to process and recover the cos t mponent from the measured signal of cos t   t   For simple expression let\222s denote cos t   t cos  o cos is what to be recovered. The signal sin  the orthogonal component of the measured signal cos  nce  t  0 considering the approximation of cos  t 1 and sin  t  0 the PM modulated carriers can be modified as follows 005 005\006\007\005\005\006\007 006 007      11 This equation is the key to recover the original carrier Herein cos t   t responds to each one of the PM modulated spectrum groups of measured signal. In order to resolve cos t   using Equation \(11\he PM component  t   and the orthogonal component sin t   t ust be calculated first. Therefore two pieces of data processing are required for resolving Equation \(11\. One is the PM demodulation for  t   and the other is the generation of orthogonal component sin t   t rom the measured signal cos t   t  002\212\002\003 004\002\212\004\002=+\002 sin cos sinsin\\(coscos\cos 002+\002\003 004\002+\004\002=+\002 cos sin sincoscossin\sin 002++\002=\002 sin\cos cos 002\212+\002=\002 cos\sin\(sin  002\212+\002++\002 002\212+\002++\002 002++\002=\002 cos\sin\(\cos cos\sin\(\cos sin\cos cos 2 005 005 005 005 t 5 005 005 005 005 6 Equations \(5\d \(6\odified respectively as follows 005 005 7 005 005 8 Combining Equations \(7\d \(8\e carrier signal cos  is derived as follows 


derives the PM component  t  Equation \(11 212 12 xjyyjxj Mx Mx  which is the aliased frequency in the baseband. This can be calculated by the test condition. The generated cosine and sine waveforms are respectively multiplied by the extracted tone group waveform. Then each of them is clearly split into th e low frequency component and twice the carrier frequency component as \(c\o the low pass filtering \(LPF\ can extract the low frequency components is and the odd numbered tones have negative However, their amplitudes are proportional to the original tone numbers The amplitude of tone number  Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        5    2.4 PM Demodulation k The original measured waveform is a multi-tone. Since each one of the tones is actually PM modulated here, the demodulation processing of Equation \(11\hould be performed on each modulated tone. Figure 8 describes the procedure in detail. First, the FFT transforms the measured waveform \(a\ into the multi-tone spectrum as \(b\ Second a single tone-group is extracted from the multiple tonegroups as \(c\pectrum group is converted into a waveform by the IFFT \(Inverse FFT d\d which is finally demodulated by the orthogonal demodulation method \(ODM   Figure 8 Extraction of Jitter Influenced Tone Group   Figure 9 PM Demodulation by ODM   t b sin 2 cos and x y y k x b Figure 9 illustrates the ODM from the spectrum point of view. The red circled part of processing \(a\ \(b\ \(c\ and \(d is performed in the time domain. The reference cosine and sine waveforms in \(b\ are mathematically generated array data in the computer program. The frequency of the cosine and sine exactly equals the target carrier frequency respectively as \(d\ illustrates. Finally the arctangent of 004\212=\004+\004\212  13 The -90 degree rotation is actually equivalent to multiplying j to the complex spectrum component in the frequency domain. Equation \(13\ indicates that j multiplication is first exchanging the real and the imaginary parts and then the imaginary part of the result is negated. Consequently the -90 degree rotation processing can be realized as illustrated in Figu T h is  processing is performed in the frequency domain and  Figure 10 \(a\ shows the demodulated phase trends for the odd number tones: 1, 3, 5, 7 and 9 of Figure 7 \(a\ Figure 10 \(b\hows the phase trends for the even number tones: 2 4, 6, 8 and 10 of Figure 7 \(a\ They have exactly the same frequency, but the odd and the even number groups are exactly out-of-phase each other. According to Table 1, the even numbered tones have positive times the amplitude of tone number 1  Figure 10 Demodulated Phase Trend  As Figure 7 \(a\hows, each tone level gradually reduces so the lower the tone level, the more difficult accurate demodulation becomes.  In order to avoid recovering inaccurate trends from the small level tones, phase trends demodulated from the major level tones are normalized and averaged. Figure 10 \(c\hows the averaged phase trend based on the top 76 tones in this particular example The amplitude is normalized to the first tone. There is clearly a 3-cycle jitter trend 2.5 Orthogonal Component Generation Further processing is required to solve Equation \(11\. The component sin t   t eeds to be derived from the measured component cos t   t Equation \(12 simply shows that sin can be generated by rotating cos  by -90 degrees 


Figure 12 illustrates the schematic of total signal processing for recovering the clear waveform and eye pattern. After processing with Equation \(11\he reconstructed waveform is distorted as the pulse width gets narrower, the smaller the amplitude becomes. Therefore the waveform should be subjected to a kind of equalization The power of each recovered carrier is compensated to restore the original power of the PM modulated state Figure 12 includes this processing. The effect will be shown in detail in the next section  Figure 12 Flow of Waveform & Eye Reconstruction 3  Experimental Results 3.1 Refined Waveform and Eye Pattern Equation \(11\ applied to each one of the tones. The averaged phase trend in Figure 10 \(b\ is proportionally scaled according to the tone number and incorporated in the processing. Then the reconstructed PRBS waveform looks refined with the thin trace as Figure 13 \(a\ Its spectrum appears organized as \(b\ever, the amplitude of the narrow pulses is smaller than expected This is because the power of the spectrum is not adjusted well frequency-wise. The PM modulation makes the carrier energy spread out around the original carrier location. The power of recovered single tone on Equation 11\s different from the original power  Figure 13 Recovered Waveform & Spectrum \(7 Gbps PRBS   Figure 14 Power Compensated Waveform & Spectrum  By collecting the signal power of each tone group in Figure 8, the original power of each carrier can be restored Consequently the reconstructed signal is improved as Figure 14 illustrates   Figure 15 PRBS Waveform & Eye \(7 Gbps PRBS 127 bits   Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        6    finally the spectrum is converted back to the waveform by the IFFT  Figure 11 Signal Processing of 90 degree Rotation  2.6 Total Signal Processing Scheme The PM demodulation and the 90 degree rotation are discussed in the previous sections. The point is that these operations should be performed on each one of the multitone line groups 


spectrum allocation in \(b\ooks totally different from the previous examples  as possible for appropriate tone separation that is as equal space of target spectral lines as possible You may need to perform some trial measurements to find a well distributed spectrum condition In Figures 16 and 17, the blurred waveforms and the eye patterns are successfully refined at the end by the processing described in Section 2 based on Equation \(11   Figure 17 5 Gbps 63-bit PRBS with Jitter 5 kHz 200 ps-pp  in Equation \(4\ So you need to look for as good a number of  Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        7    Figure 15 contrasts the original blurred PRBS waveform d\The PRBS is dramatically refined. When reshuffling the waveform \(c big open eye pattern is restored as \(e 3.2  Different Conditions Let\222s verify the effect in different conditions. Figure 16 shows the 6 Gbps 127-bit PRBS with a 5 kHz 100 ps-pp jitter. Because of changing the bit rate, the FFT spectrum b\of the measured waveform looks totally different from the case of 7 Gbps depicted in Figure 7 \(a   Figure 16 6 Gbps 127-bit PRBS with Jitter 5 kHz 100 ps-pp  Figure 17 shows the 5 Gbps 63-bit PRBS with 5 kHz 200 ps-pp jitter. Both the bit rate and the PRBS length are changed. So the The sampler used in this work covers bandwidth up to 10 GHz When testing 7 Gbps 127-bit PRBS stream, 181 tones are accommodated in the 10 GHz band. When testing 6 Gbps 127-bit PRBS and 5 Gbps and 63 bits, 212 and 126 tones are accommodated respectively in the band Figure 18 shows a more practical example that is an emulation of SSC applied bit stream. The test signal is the 7 Gbps 31-bit PRBS, which is frequency modulated \(FM with a 31.5 kHz triangle signal. The frequency deviation is programmed as 0.01% of the bit rate that is 700 kHz Figure 18 \(a\ is the primitive measured waveform, which is directly processed by the FFT, disclosing the frequency spectrum as \(b\ince the test signal is generated by using a UHF AWG \(arbitrary waveform generator\, the programmed PRBS waveform is intentionally limited its spectrum into the main lobe only. So there are 31 tones captured in the baseband. The sampling rate is tuned up to make every tone distributed evenly in the baseband. Each tone is numbered from 1 to 31. Each tone is FM modulated The bin #31 corresponds to the bit clock and it is the most deviated of all. Reshuffling the primitive waveform \(a\ by manner of CWR with the key number Nx Nx Nx the two sequences of the PRBS waveform is reconstructed as \(c Since the measurement is gr eatly influenced by the SSC the recovered PRBS waveform looks too smeared to see a clear trace. As discussed in Section 2.4, performing the PM demodulation and further processing, the phase trend is disclosed as \(d\. Then the differential of the phase trend reveals the triangle frequency trend as \(e\ whose spectrum is shown in \(f\ The triangle frequency is 31.5 kHz and the frequency deviation is 700 kHz-pp. As cleaning up the SSC trend according to the pr ocedures discussed in the  b\nd 17 \(b\how, the spectrum allocation looks greatly different in an under-sampling situation. There are lots of possible numbers available for 


Then if you want to increase the tone spacing, reduce the PRBS length. The available tone space determines the recoverable jitter frequency and amplitude or the frequency deviation of SSC  Waveform samplers utilize aliasing to measure UHF signals. In under-sampling situation, jitter higher than half the sampling rate cannot be distinguished from the original existing jitter in the baseband 5. Conclusion Mixed signal ATE integrates a wideband waveform sampler which is a very useful resource to measure UHF  Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        8    previous sections, the smeared waveform \(c\s refined to the clear trace as \(g it is reshuffled by the key number 31, the big open eye is reconstructed as \(h     Figure 18 7 Gbps 31-bit PRBS with 31.5 kHz Triangle SSC  4 Discussion and Limitation The waveform sampler used in this work has an analog bandwidth \(ABW\ 10 GHz and an actual sampling rate  Fs 110 Msps. All signal tones in the ABW should be captured in the baseband of 55 MHz. When it captures 65536 points N f data, the primitive frequency resolution is Fs  N that is approximately 1.7 kHz. So jitter more than several kHz can be removed appropriately Figure 19 shows a part of Figure 7, illustrating the closeup primitive spectrum. Each tone is scattered by the jitter The tone spacing is approximately 275 kHz wide so that the PM spread spectrum up to +/-138 kHz would not cross over each other. Then jitter up to 138 kHz can be removed in this situation. If you need to remove specific jitter frequency, you could apply a LPF processing in the PM demodulation scheme  Figure 19 Acceptable Modulation Range  The number of bits of a PRBS corresponds to the number of tones contained in the main lobe or a side lobe of its spectrum. Therefore the bit rate of PRBS decides the way of multi-tone spectrum distribution. The ABW of the waveform sampler determines how many tones would be captured in the measurement. If you select an available sampler in an ATE, the ABW and Fs are given. Then the number of bits and the bit rate of the test signal PRBS should be carefully examined when making a test plan Table 2 shows how many tones would be considered in the ABW of 10 GHz. The table says that the lower the bit rate the more tones are captured in the baseband, which means the tone spacing becomes narrower for the fixed baseband width. On the other hand, the shorter the PRBS length, the fewer tones will be in the baseband   Table  2 Number of Tones to Be Accommodated  In general, y ou should use a waveform sampler with as high an actual sampling rate as possible for expanding the baseband width 


 Lecture 4.3 INTERNATIONAL TEST CONFERENCE                                        9    signals including high-speed digital waveforms. Unlike high-end oscilloscopes, ATE usually does not have CDR capability integrated into the hardware. While a waveform sampler performs under-sampling of the test signal, the captured waveform is influenced by slow jitter. The purpose of this work is to remove slow jitter effects such as SSC in a high-speed digital signal and restore a fine waveform and eye pattern. The test signal is a PRBS bit stream. Slow jitter reduction is realized by post processing whose steps are  PRBS becomes extremely wideband multi-tone  Jitter is PM onto each tone  Original tones can be recovered by Equation \(11 which is constructed by the modulation signal e measured signal \(cos  d its orthogonal signal sin    Each modulated tone is extracted as a group and demodulated by the ODM, recovering the modulation signal   The sin  is generated by 90 degree rotation from the cos  The FFT & IFFT method takes care of this processing  Recovered tones are equalized power-wise to their original modulated state  CWR by the factor of Nx reconstructs a PRBS waveform  A second CWR by the factor of the number of bits eg. 127\onstructs an eye pattern Finally the developped processing procedure succeeded to reconstruct clear refined PRBS waveforms and wide open eye patterns. The key in the processing is that Equation 11\ is derived as a relatively simple combination of acceptable processing components. This paper mainly discussed an example of a 7 Gbps 127-bit PRBS signal containing a jitter of 5kHz. The waveform sampler employed in the experiment has an actual sampling rate of 110 Msps and the ABW of 10 GHz. Reduction of slow jitter and SSC is demonstrated in the examples. The multitone spectrum appearance in under-sampling situation greatly depends on the PRBS bit length and the bit rate of the signal. The sampling condition should be carefully chosen for the aliased multi-tone spectra to fall in the baseband with as even spacing as possible to avoid overlapping of the jitter-modulated spectrum with each other. If the Fs and ABW of sampler are given, the higher the PRBS bit rate and the shorter the PRBS bit length, the better for wider tone spacing 6. References 1  Takashi Ito, Hideo Okawara, and Jinlei Liu, \223RNA Advanced Phase Tracking Method for Digital Waveform Reconstruction,\224 Proceedings IEEE Int Test Conference 2012, Paper18.3 2  223V93000 System Reference Manual,\224 Advantest 2013 3  Matthew Mahoney, \223Chapter 4: Coherence and Coherent Sampling,\224 DSP Based Testing of Analog and Mixed-Signal Circuits IEEE Computer Society Press 1987, pp.45-58 4  Hideo Okawara, \223DSP-Based Testing Fundamentals 47: Coherent Waveform Reconstruction,\224 Advantest\222s Go/semi Newsletter December 2012 5  Hideo Okawara, \223DSP-Based Testing Fundamentals 8: Under-sampling,\224 Verigy\222s Go/semi Newsletter  December 2008 6  Hideo Okawara, \223Elegant Construction of SSC Implemented Signal by AWG and Organized Undersampling of Wideband Signal,\224 Proceedings IEEE Int Test Conf 2011, Paper 11.2    


  


Bottom Top A B 
Figure 15 Figure 16 
messages seen for all workers in a superstep \(Figures 10 and 13\. When looking at the messages sent by workers in a superstep for METIS, we see that there are message load imbalances within work ers in a superstep, caused due to concentration of vertices being traversed in that superstep in certain partitions This variability is much more pronounced in CP as compared to WG \(Figures 11 and 14\ E.g. in superstep 9 for CP, twice as many messages \(4M\ are generated by a worker compared to another \(2M\.  For Pregel BSP, the time taken in a superstep is determined by the slowest worker in that superstep. Hence increase d variability in CP causes even goodŽ partitioning strategies to cause an increase in total execution time wh en using the Pregel/BSP model VIII A NALYSIS OF E LASTIC C LOUD S CALING  Cloud environments offer elasticity … the ability to scale-out or scale-in VMs on-demand and only pay for what one uses [28   On th e f l i p s i de  on e en ds u p  paying for VMs that are acquired even if they are underutilized. We have already shown the high variation in compute/memory resources used by algorithms like BC and APSP across different supersteps. While our earlier swath initiation heuristics attempt to flatten these out by overlapping swath executions, one can consider leveraging the clouds elasticity to, instead, scale up and down the concurrent workers \(and graph partitions\ allocated in each superstep The peak and trough nature of resource utilization combined with Pregel/BSPs synchronous barrier between supersteps offers a window for dynamic scaleout and …in at superstep boundaries. Peak supersteps can greatly benefit from additional workers, while those same workers will contribute to added synchronization overhead for trough supersteps We offer an analysis of the potential benefits of elastic scaling by extrapolating from observed results for running BC on WG and CP graphs, using four and eight workers.  To provide a fair and focused comparison, we turned off swath heuristics in favor of fixed swath sizes and initiation intervals Figure 15 \(Bottom\ plots the speedup of BC running on eight workers when normalized to BC running on four workers, at corresponding supersteps.  The number of workers does not impact the number of supersteps We also plot the number of active vertices \(i.e. vertices still computing for a given swath\these supersteps which is a measure of how much work is required \(Fig 15 \(Top\. We find that we occasionally get superlinear speedup spikes \(i.e. >2x\ that shows a strong correlation with the peaks of active messages, for both WG and CP graphs. At other times, the sp eedup is sublinear or even a speed-down \(i.e. <1\responding to inactive vertices.  The superlinear speedup is attributable to the lower contention and reduced memory pressure for 8 workers when the active vertices peak \(similar to what we observed for the swath initiation heuristics Similarly, the below par speedup during periods of low activity is contributed by the increased overhead of barrier synchronization across 8 workers. Intuitively, by dynamically scaling up the number of workers for supersteps with peaking active vertices and scaling them down otherwise, we can leverage the superlinear speedup and get more value per worker Using a threshold of 50% active vertices as the threshold condition for between 4 and 8 workers in a superstep, we extrapolate the time per superstep and compared this to the fixed 4 and 8 worker runtimes. We also compute the best-case run time using an oracleŽ approach to i.e. for each superstep, we pick the minimum of the 4 or 8 workers time.  Note that these projections do not yet consider the overheads of scaling, but are rather used to estimate the potential upside if we had an ideal or an automated heuristic for scaling. The total time estimates for running BC on WG and CP graphs, normalized to  
 plot shows speedup of 8 workers relative to 4 workers, for each superstep, when running BC on WG and CP graphs plot shows the number of vertices active in that superstep Estimated time for BC using elastic scaling, normalized to time taken for 4 workers. Normalized cost is shown on secondary Y axis WG graph shown on left CP graph shown on right. Smaller is better 
022\011 022\010 022\007 022\002 006 002 007 006 002 007 010 011 012 013 014 015 006 006\003\002 006\003\007 006\003\010 006\003\011 006\003\012 006\003\013 006\003\014 006\003\015 006\003\016 002 027\031\030\037\020#@\020"\031\030\027\020\035 0201!2#\024$#\015#5\024",\020"#\017\003"\003\031\003#\011#5\024",\020"\035 024"'\033\026\0309\0201#\\031\020 2 035#\032\020"#+!\034 017\020\021\022\023\024\024\025\026\020 027\030\031\022\032\033\031\020\034\031\035 017\020\021\022\023\024\024\025\026\020#?#/\027\031\030\037\020#@\020"\031\030\027\020\035 027\030\031\022\032\033\031\020\034\031\035#?#/\027\031\030\037\020#@\020"\031\030\027\020\035 036\030\034\020\033"#\\0201!2 006 006\003\007 006\003\011 006\003\013 006\003\015 002 002\003\007 006 006\003\002 006\003\007 006\003\010 006\003\011 006\003\012 006\003\013 006\003\014 006\003\015 006\003\016 002 011#5\024",\020 B\034\0267 015#5\024",\020 B\034\0267 1\0332\031\030\037\020 030\034\025 1\0332\031\030\037\020 036\024\017\020 024!\0341 024\035\031#>\024"'\033\026\0309\0201#\031\024#\011#5\024",\020"#.\024\035\031 017\020\021\022\023\024\024\025\026\020#+!\034\022&\030'\020#>\024"'\033\026\0309\0201#\031\024#\011#5\024",\020"#&\030'\020 011#5\024",\020"#&\030'\020 015#5\024",\020"#&\030'\020 024\035\031 006 006\003\007 006\003\011 006\003\013 006\003\015 002 002\003\007 002\003\011 002\003\013 006 006\003\002 006\003\007 006\003\010 006\003\011 006\003\012 006\003\013 006\003\014 006\003\015 006\003\016 002 011#5\024",\020 B\034\0267 015#5\024",\020 B\034\0267 1\0332\031\030\037\020 033\026\030\034\025 1\0332\031\030\037\020 036\024\017\020 024!\0341 024\035\031#>\024"'\033\026\0309\0201#\031\024#\011#5\024",\020"#.\024\035\031 027\030\031\022\032\033\031\020\034\031\035#+!\034\022&\030'\020#>\024"'\033\026\0309\0201#\031\024#\011#5\024",\020"#&\030'\020 011#5\024",\020"#&\030'\020 015#5\024",\020"#&\030'\020 024\035 031 
 
dynamically scaling ideal scaling 
Our hypothesis is that an intelligent adaptive scaling of workers can achieve a similar performance as a large, fixed number of workers, but with reduced cost 
213 


Nature Nature Ecological Applications Nature ACM International Conference on Management of Data \(SIGMOD In Parallel Object-Oriented Scientic Computing \(POOSC Science Communications of the ACM ACM Workshop on Mining and Learning with Graphs Communications of the ACM HotCloud Proceedings of the 19th ACM International Symposium on High PErformance Distributed Computing HPDC Knowledge and Information Systems KAIS International Conference on Computational Science IEEE International Conference on Cloud Computing Technology and Science ACM/IEEE Conference on Advances in Social Network Analysis and Mining \(ASONAM IEEE International Parallel and Distributed Processing Symposium \(IPDPS International Conference on Distributed Computing and Networking Journal of Mathematical Sociology International Conference on Parallel Processing Communications of the ACM 
 
observed time taken using 4 workers, are plotted in Figures 16\(A\ and 16\(B We see that our dynamic scaling heuristic using the percentage of active vertices achieves nearly the same CP\ or better \(WG\ performance as a fixed 8 worker approach. Clearly there is benefit of using fewer workers for low utilization su persteps to eliminate the barrier synchronization overhead. Also, the dynamic scaling heuristic performs almost as well as the ideal scaling. Finally, when we consider the monetary cost of the proposed approaches, assuming a pro-rata normalized cost per VM-second plotted on the secondary Y axis, we see that dynamic scaling is comparable \(CP\ or cheaper \(WG\ than a 4 worker scenario while offering the performance of an 8 worker deployment IX C ONCLUSION  In conclusion, we introduce optimization and heuristics for controlling memory utilization and show they are critical to performance.  By breaking computation into swaths of vertices and using our sizing heuristics we achieve up to 3.5x speedup over the maximum swath size that does not cause the a failure.  In addition overlapping swath executions can provide a 24% gain with automated heuristics and even greater speedup when a priori knowledge of the network characteristics is applied This evaluation offers help to eScience users to make framework selection and cost-performancescalability trade-offs. Our he uristics are generalizable and can be leveraged by other BSP and distributed graph frameworks, and for graph applications beyond BC. Our work uncovered an unexpected impact of partitioning and it would be worthwhile, in future, to examine the ability to pred ict, given certain graph properties, a suitable partitioning model for Pregel/BSP It may also be useful to perform such evaluations on larger graphs and more numbers of VMs. At the same time, it is also worth considering if non-linear graph algorithms are tractable in pr actice for large graphs in a distributed environment B IBLIOGRAPHY  1  F  L i lj er os C   Ed l i n g L  A m a r a l H  S t an ley   and Y    berg The web of human sexual contacts 
vol. 411, pp. 907908, 2001   H Je o n g  S   Ma so n A  L   B a ra b s i  a nd Z   Oltva i  L e t ha l i t y  and centrality in protein networks vol. 411, pp. 41-42 2001   O. B o din and E   E s t r ada    U s i n g n e t w ork c e nt r a l i t y  m e a s ures t o  manage landscape connectivity vol 18, no. 7, pp. 1810-1825, October 2008   D. W a ts s  and S  S t r ogat z  C olle c t i v e  d y nam i cs of  s m a ll-w orl d   networks vol. 393, no. 6684, pp. 440…442, June 1998   G  Ma lew i c z   M A u s t er n A   Bik  J   Dehn er t I  Hor n   N. L e i s er and G. Czajkowski, "Pregel: A system for large-scale graph processing," in 2010   D. G r egor  and A  L u m s dain e  T h e  pa r a llel  B G L  A gen e r i c  library for distributed graph computations," in 2005   B. S h a o  H. W a n g  and Y  L i T he T r init y G r aph E n g i n e    Microsoft Research, Technical Report MSR-TR-2012-30, 2012   A  F ox  C lo ud c o m putin g w h at  s  in it for m e  as  a  s c i e n tis t     vol. 331, pp. 406-407, 2011   S. G h e m a w a t  and J  De an   Map re duc e s i m p lifi e d data  processing on large clusters vol 51, no. 3, pp. 107-113, 2008   J  L i n and M. S c hat z   Des i g n  patt er n s  for eff i ci ent gr aph algorithms in MapReduce," in 2010   L   Va l i ant   A b r id g i n g m o d e l f or pa r a llel com putati o n  vol. 33, no. 8, pp. 103-111, 1990 12 a c h e  Ha ma    O n l i n e    http://hama.apache.org   13 Ap a c h e  Ha d o op    O n l i n e    http://hadoop.apache.org     M Z a h a r i a, M. Ch ow dhu ry M F r ank l in S  S h e n k e r, and I   Stoica, "Spark: Cluster Computing with Working Sets," in 2010   J  Ekana y ak e e t a l     T w i st er A  r untim e f o r it er ati v e  MapReduce," in Chicago, 2010, pp. 810-818   U. K a n g  C  T s o u rakakis   and C. F a l outs o s  Peg a s us   Minin g  Peta-scale Graphs," in 2010   M. P a c e  B S P vs  MapR e duc e    in vol. 103.2081, 2012   S. Seo  E  Yoo n, J  K i m  S  J i n  J-S. K i m   and S   Ma e n g HAMA: An Efficient matrix computation with the MapReduce framework," in 2010, pp. 721-726   S. S a l i h ogl u  and J  W i d o m  G PS A G r a ph P r oc e s s i n g Sy s t em    Stanford University, Technical Report 2011   R L i cht e n w a l t e r and N   Cha w la D is Ne t  A fr am ew ork for  distributed graph computation," in  2011   K  Maddu r i  D. E d i g er K   J i an g  D. Bad e r  and D  Cha v a r riaMiranda, "A faster parallel algorithm and efficient multithreaded implementations for evaluating betweenness centrality on massive datasets," in 2009   E  K r e p s k a, T  K i el m a nn, W  F o kkink, H   Ba l, "A  hi g h level framework for distributed processing of large-scale graphs," in 2011, pp. 155-166   L   Pa ge  S  B r in R. M o t w ani and T  W i nogr ad  T h e P a geRank citation ranking: Bringing order to the web," Stanford InfoLab Technical Report 1999-66, 1999   U  Brand  s  A f a s t er  a l gor ith m for  b e t w eenn e s s c e nt r a l i t y    vol. 25, no. 2, pp. 163-177 2001   Stan fo r d  Net w or k A na l y s is Pro j e c t  O n l in e    http://snap.stanford.edu    I  S t ant o n and G  K l i o t, "S t r e a m i n g G r aph P a rtiti o n in g  for L a rge Distributed Graphs," Microsoft Corp., Technical Report MSRTR-2011-121, 2011   G   K a ry pis and V   K um a r A fas t and hi g h qua l i t y m u l t i l evel scheme for partitioning irregular graphs," in 1995, pp. 113-122   M. A r m b r u s t e t  a l   A v i ew of  c l o u d  c o m putin g    vol. 53, no. 0001-0782, pp. 50-58 April 2010  
214 


  13  or gani c  c he m i s t r y  i n our  Sol ar  Sy s t e m       Xi a n g  L i r e c e i v e d h i s B  S   m is tr y  fr o m  th e  P e k in g  U n iv e r s ity  C h in a  in  2 0 0 3  and P h D   i n P hy s i c al  C he m i s t r y  f r om  t he  J ohns  H opk i ns  Un i v e r s i t y  i n  2 0 0 9   He  h a s  b e e n  a  R e s e a r c h  A s s o c i a t e  wi t h  a  j o i n t  a p p o i n t m e n t  a t  t h e  U n i v e r s i t y  o f  M a r y l a n d   Ba l t i m o r e  C o u n t y  a n d  N AS A G o d d a r d  S p a c e  Fl i  Ce n t e r  s i n c e  2 0 1 1   H i s  r e s e a r c h  f o c u s e s  o n  t h e  d e t e c t i o n  of  t r ac e  e l e m e nt  and as t r obi ol ogi c al l y  r e l e v ant  or gani c  mo l e c u l e s  i n  p l a n e t a r y  s y s t e ms   l i k e  M a r s   He  i s  es p eci a l l y i n t er es t ed  i n  t h e d evel o p m en t  o f  T i m e of  and I on T r ap m as s  s pe c t r om e t e r s w i t h v a r i o u s i o n i z a t i o n  ng te c h n iq u e s   Wi l l  B r i n c k e r h o f f  sp a c e  sc i e n t i st  i n  t h e  Pl a n e t a r y  En v i r o n m e n t s  La b  a t  N A S A  s  G o d d a r d  Spac e  F l i ght  C e nt e r  i n Gr e e n b e l t   M D w i t h  pr i m ar y  r e s pons i bi l i t y  f or  th e  d e v e lo p m e n t o f th e  L D TO F  m a s s  s p e c t r o  th is  p r o je c t H e  h a s  fo c u s e d  re c e n t l y  o n  t h e  d e v e l o p m e n t  o f  m i n i a t u re  l a se r d ma s s  s p e c t r o me t e r s  f o r  f u t u r e  p l a n e t a r y  mi s s i o n s  a l o n g  wi t h  b a s i c  e x p e r i m e n t a l  r e s e a r c h  i n  a s t r o b i o l o g y  a n d  p r e bi ot i c  s y nt he s i s   D r   B r i nc k e r hof f  i s  i nv ol v e d i n t he  de v e l opm e nt  of  m as s  s pe c t r om e t e r  f or  bot h t he  2011 Ma r s  S c i e n c e  L a b o r a t o r y  a n d  t h e  2 0 1 8  E x o Ma r s  mi s s i o n s   


  14   


Copyright © 2009 Boeing. All rights reserved  Issues and Observations Initial load of one day of data ~ 7 hours Optimizations  Write data in batches  Use a mutable data structure to create data strings  Deploy a higher performance machine  Use load instead of insert  Use DB2 Range-Partitioned tables  Database tunings Time reduced from 7 hours to approx 30 minutes 


Copyright © 2009 Boeing. All rights reserved  Optimizations Use a mutable data structure to create data strings  Original application created the SQL statement by appending elements to a Java String  It was taking five hours \(of the seven hours Strings  Instead Java StringBuilder used  Java Strings immutable  Time savings of 71.4 


Copyright © 2009 Boeing. All rights reserved  Optimizations Deployed on a higher-performance machine  Application ported from IBM Blade Center HS21 \(4GB of RAM and 64-bit dual-core Xeon 5130 processor to Dell M4500 computer \(4GB of RAM and 64-bit of quad-core Intel Core i7 processor  Reduced the time to thirty minutes Bulk loading instead of insert  Application was modified to write CSV files for each table  Entire day worth of data bulk loaded  Reduced the time to fifteen minutes 


Copyright © 2009 Boeing. All rights reserved  Optimizations Range-Partitioned tables \(RPT  To limit the size of tables, the original code created multiple tables per table type  This puts burden on the application to query multiple tables when a range crosses several tables  With RPT, user is not required to make multiple queries when a range crosses a table boundary  Increased the time to thirty minutes  Additional fifteen minute cost per day of partitioning enabled time savings during queries 


Copyright © 2009 Boeing. All rights reserved  Optimizations Database tunings  Range periods changed from a week to a month  Automatic table space resizing changed from 32MB to 512KB  Buffer pool size decreased  Decreased the time to twenty minutes Overall, total time savings of 95.2 


Copyright © 2009 Boeing. All rights reserved  20 IBM Confidential Analytics Landscape Degree of Complexity Competitive Advantage Standard Reporting Ad hoc reporting Query/drill down Alerts Simulation Forecasting Predictive modeling Optimization What exactly is the problem What will happen next if What if these trends continue What could happen What actions are needed How many, how often, where What happened Stochastic Optimization Based on: Competing on Analytics, Davenport and Harris, 2007 Descriptive Prescriptive Predictive How can we achieve the best outcome How can we achieve the best outcome including the effects of variability Used with permission of IBM 


Copyright © 2009 Boeing. All rights reserved Initial Analysis Activities Flights departing or arriving on a date Flights departing or arriving within a date and time range Flights between city pair A,B Flights between a list of city pairs Flights passing through a volume on a date. \(sector, center, etc boundary Flights passing through a volume within a date and time range Flights passing through an airspace volume in n-minute intervals All x-type aircraft departing or arriving on a date Flights departing or arriving on a date between city pair A,B Flights departing or arriving on a date between a list of city pairs Flights passing through a named fix, airway, center, or sector Filed Flight plans for any of the above Actual departure, arrival times and actual track reports for any of the above 


Copyright © 2009 Boeing. All rights reserved  Initial SPSS Applications Show all tracks by call sign 


Copyright © 2009 Boeing. All rights reserved  Predictive / Prescriptive Analytics Use-Case For a given Airspace Volume of Interest \(AVOI compute distinct traffic volume at some point in the future  Aim to alert on congestion due to flow control areas or weather if certain thresholds are exceeded  Prescribe solution \(if certain thresholds are exceeded Propose alternate flight paths  Use pre-built predictive model  SPSS Modeler performs data processing Counts relevant records in the database \(pattern discovery Computes traffic volume using statistical models on descriptive pattern Returns prediction with likelihood 


Copyright © 2009 Boeing. All rights reserved  Predictive / Prescriptive Analytics Use-Case Advanced Arrival Procedures with Active Abatement Potentials   9/23/10  24 Pulls in the TRACKINFO table of MAIN using SQL Limits the data to database entries which fall inside the AVOI Combines the SOURCE_DATE and SOURCE_TIME to a timestamp that can be understood by modeler Computes which time interval the database entry falls in. The time interval is 15 minutes Defines the target and input fields needed for creating the model Handles the creation of the model Produces a graph based off of the model results Final prediction 


Copyright © 2009 Boeing. All rights reserved  Initial Cognos BI Applications IBM Cognos Report Studio  Web application for creating reports  Can be tailored by date range, aircraft id, departure/arrival airport etc  Reports are available with links to visuals IBM Framework Manager  Used to create the data package  Meta-data modeling tool  Users can define data sources, and relationships among them Models can be exported to a package for use with Report Studio 


Copyright © 2009 Boeing. All rights reserved  Flights Departing Las Vegas on Jan 1, 2012 1 of 3 Report shows the departure date, departure and arrival locations and hyperlinks to Google Map images DeparturePosition and ArrivalPosition are calculated data items formatted for use with Google Maps Map hyperlinks are also calculated based on the type of fix 


Copyright © 2009 Boeing. All rights reserved  Flights Departing Las Vegas on Jan 1, 2012 2 of 3 DeparturePosition, Departure Map, ArrivalPosition and Arrival Map are calculated data items \(see departure items below DepartureLatitude DepartureLongitude DeparturePosition Departure Map 


Copyright © 2009 Boeing. All rights reserved  Flights Departing Las Vegas on Jan 1, 2012 3 of 3 


Copyright © 2009 Boeing. All rights reserved  Conclusion and Next Steps Current archive is 50 billion records and growing  Approximately 34 million elements per day  1GB/day Sheer volume of raw surveillance data makes analytics process very difficult The raw data runs through a series of processes before it can be used for analytics Next Steps  Continue application of predictive and prescriptive analytics  Big data visualization 


Copyright © 2009 Boeing. All rights reserved  Questions and Comments Paul Comitz Boeing Research & Technology Chantilly, VA, 20151 office Paul.Comitz@boeing.com 


Copyright © 2009 Boeing. All rights reserved Advanced Arrival Procedures with Active Abatement Potentials   9/23/10  31 


Copyright © 2009 Boeing. All rights reserved Advanced Arrival Procedures with Active Abatement Potentials   9/23/10  32 Backup Slides 


Copyright © 2009 Boeing. All rights reserved  Initial Approach Initial Investigations  Apache Solr/Lucene  Data Warehouse Evaluate Hadoop in the future 


Copyright © 2009 Boeing. All rights reserved  Using SOLR Uncompress Track Information Messages To use with Solr  Transforming track messages from their  original schema to Solr required building a “key, value” list using an XSTL  Queries made against this list of “key, value” pairs Transformation Process  One day of data ~ 4.5 hours Once transformation complete search/query performance very good Geo spatial queries using  unique query language 


Copyright © 2009 Boeing. All rights reserved  Representation Aviation data is frequently represented in more than one form 


